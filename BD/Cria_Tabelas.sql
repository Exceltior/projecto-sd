-- Generated by Oracle SQL Developer Data Modeler 3.3.0.747
--   at:        2013-11-17 22:03:50 WET
--   site:      Oracle Database 11g
--   type:      Oracle Database 11g




CREATE USER SD IDENTIFIED BY ACCOUNT UNLOCK ;

CREATE TABLE SD.IDEIAS
  (
    IID       NUMBER (7) NOT NULL ,
    TITULO    VARCHAR2 (80 BYTE) NOT NULL ,
    DESCRICAO VARCHAR2 (1000 BYTE) NOT NULL ,
    USERID    NUMBER (7) NOT NULL ,
    ACTIVA    NUMBER (1) NOT NULL ,
    HALLFAME  NUMBER (1) NOT NULL
  )
  PCTFREE 10 PCTUSED 40 TABLESPACE SYSTEM LOGGING STORAGE
  (
    INITIAL 65536 NEXT 1048576 PCTINCREASE 0 MINEXTENTS 1 MAXEXTENTS 2147483645 FREELISTS 1 FREELIST GROUPS 1 BUFFER_POOL DEFAULT
  ) ;
CREATE UNIQUE INDEX SD.IDEIAS_PK ON SD.IDEIAS
  (
    IID ASC
  )
  TABLESPACE SYSTEM PCTFREE 10 STORAGE
  (
    INITIAL 65536 NEXT 1048576 PCTINCREASE 0 MINEXTENTS 1 MAXEXTENTS 2147483645 FREELISTS 1 FREELIST GROUPS 1 BUFFER_POOL DEFAULT
  )
  LOGGING ;
  ALTER TABLE SD.IDEIAS ADD CONSTRAINT IDEIAS_PK PRIMARY KEY
  (
    IID
  )
  USING INDEX SD.IDEIAS_PK ;

CREATE TABLE SD.IDEIASFICHEIROS
  (
    IID          NUMBER (7) NOT NULL ,
    PATH         VARCHAR2 (70 BYTE) NOT NULL ,
    ORIGINALFILE VARCHAR2 (100 BYTE) NOT NULL
  )
  PCTFREE 10 PCTUSED 40 TABLESPACE SYSTEM LOGGING STORAGE
  (
    INITIAL 65536 NEXT 1048576 PCTINCREASE 0 MINEXTENTS 1 MAXEXTENTS 2147483645 FREELISTS 1 FREELIST GROUPS 1 BUFFER_POOL DEFAULT
  ) ;
CREATE UNIQUE INDEX SD.IDEIASFICHEIROS_PK ON SD.IDEIASFICHEIROS
  (
    IID ASC , PATH ASC
  )
  TABLESPACE SYSTEM PCTFREE 10 STORAGE
  (
    INITIAL 65536 NEXT 1048576 PCTINCREASE 0 MINEXTENTS 1 MAXEXTENTS 2147483645 FREELISTS 1 FREELIST GROUPS 1 BUFFER_POOL DEFAULT
  )
  LOGGING ;
  ALTER TABLE SD.IDEIASFICHEIROS ADD CONSTRAINT IDEIASFICHEIROS_PK PRIMARY KEY
  (
    IID, PATH
  )
  USING INDEX SD.IDEIASFICHEIROS_PK ;

CREATE TABLE SD.SHARES
  (
    IID       NUMBER (7) NOT NULL ,
    USERID    NUMBER (7) NOT NULL ,
    NUMSHARES NUMBER (7) NOT NULL ,
    VALOR     NUMBER (10) NOT NULL ,
    NUMMIN    NUMBER (7) NOT NULL
  )
  PCTFREE 10 PCTUSED 40 TABLESPACE SYSTEM LOGGING STORAGE
  (
    INITIAL 65536 NEXT 1048576 PCTINCREASE 0 MINEXTENTS 1 MAXEXTENTS 2147483645 FREELISTS 1 FREELIST GROUPS 1 BUFFER_POOL DEFAULT
  ) ;
CREATE UNIQUE INDEX SD.SHARES_PK ON SD.SHARES
  (
    IID ASC , USERID ASC , NUMSHARES ASC , VALOR ASC , NUMMIN ASC
  )
  TABLESPACE SYSTEM PCTFREE 10 STORAGE
  (
    INITIAL 65536 NEXT 1048576 PCTINCREASE 0 MINEXTENTS 1 MAXEXTENTS 2147483645 FREELISTS 1 FREELIST GROUPS 1 BUFFER_POOL DEFAULT
  )
  LOGGING ;
  ALTER TABLE SD.SHARES ADD CONSTRAINT SHARES_PK PRIMARY KEY
  (
    IID, USERID, NUMSHARES, VALOR, NUMMIN
  )
  USING INDEX SD.SHARES_PK ;

CREATE TABLE SD.TOPICOS
  (
    TID       NUMBER NOT NULL ,
    NOME      VARCHAR2 (20 BYTE) NOT NULL ,
    DESCRICAO VARCHAR2 (150 BYTE) NOT NULL ,
    USERID    NUMBER (7) NOT NULL
  )
  PCTFREE 10 PCTUSED 40 TABLESPACE SYSTEM LOGGING STORAGE
  (
    INITIAL 65536 NEXT 1048576 PCTINCREASE 0 MINEXTENTS 1 MAXEXTENTS 2147483645 FREELISTS 1 FREELIST GROUPS 1 BUFFER_POOL DEFAULT
  ) ;
CREATE UNIQUE INDEX SD.TOPICOS_PK ON SD.TOPICOS
  (
    TID ASC
  )
  TABLESPACE SYSTEM PCTFREE 10 STORAGE
  (
    INITIAL 65536 NEXT 1048576 PCTINCREASE 0 MINEXTENTS 1 MAXEXTENTS 2147483645 FREELISTS 1 FREELIST GROUPS 1 BUFFER_POOL DEFAULT
  )
  LOGGING ;
  ALTER TABLE SD.TOPICOS ADD CONSTRAINT TOPICOS_PK PRIMARY KEY
  (
    TID
  )
  USING INDEX SD.TOPICOS_PK ;

CREATE TABLE SD.TOPICOSIDEIAS
  (
    TID NUMBER NOT NULL ,
    IID NUMBER (7) NOT NULL
  )
  PCTFREE 10 PCTUSED 40 TABLESPACE SYSTEM LOGGING STORAGE
  (
    INITIAL 65536 NEXT 1048576 PCTINCREASE 0 MINEXTENTS 1 MAXEXTENTS 2147483645 FREELISTS 1 FREELIST GROUPS 1 BUFFER_POOL DEFAULT
  ) ;
CREATE UNIQUE INDEX SD.TOPICOSIDEIAS_PK ON SD.TOPICOSIDEIAS
  (
    IID ASC , TID ASC
  )
  TABLESPACE SYSTEM PCTFREE 10 STORAGE
  (
    INITIAL 65536 NEXT 1048576 PCTINCREASE 0 MINEXTENTS 1 MAXEXTENTS 2147483645 FREELISTS 1 FREELIST GROUPS 1 BUFFER_POOL DEFAULT
  )
  LOGGING ;
  ALTER TABLE SD.TOPICOSIDEIAS ADD CONSTRAINT TOPICOSIDEIAS_PK PRIMARY KEY
  (
    IID, TID
  )
  USING INDEX SD.TOPICOSIDEIAS_PK ;

CREATE TABLE SD.TRANSACOES
  (
    TRANSACTIONID NUMBER (7) NOT NULL ,
    COMPRADOR     NUMBER (7) NOT NULL ,
    VENDEDOR      NUMBER (7) NOT NULL ,
    VALOR         NUMBER (10) NOT NULL ,
    NUMSHARES     NUMBER NOT NULL ,
    IID           NUMBER (7) NOT NULL ,
    DATA          DATE NOT NULL
  )
  PCTFREE 10 PCTUSED 40 TABLESPACE SYSTEM LOGGING STORAGE
  (
    INITIAL 65536 NEXT 1048576 PCTINCREASE 0 MINEXTENTS 1 MAXEXTENTS 2147483645 FREELISTS 1 FREELIST GROUPS 1 BUFFER_POOL DEFAULT
  ) ;
CREATE UNIQUE INDEX SD.TRANSACOES_PK ON SD.TRANSACOES
  (
    TRANSACTIONID ASC
  )
  TABLESPACE SYSTEM PCTFREE 10 STORAGE
  (
    INITIAL 65536 NEXT 1048576 PCTINCREASE 0 MINEXTENTS 1 MAXEXTENTS 2147483645 FREELISTS 1 FREELIST GROUPS 1 BUFFER_POOL DEFAULT
  )
  LOGGING ;
  ALTER TABLE SD.TRANSACOES ADD CONSTRAINT TRANSACOES_PK PRIMARY KEY
  (
    TRANSACTIONID
  )
  USING INDEX SD.TRANSACOES_PK ;

CREATE TABLE SD.UTILIZADORES
  (
    USERID          NUMBER (7) NOT NULL ,
    EMAIL           VARCHAR2 (50 BYTE) NOT NULL ,
    USERNAME        VARCHAR2 (20 BYTE) NOT NULL ,
    PASS            VARCHAR2 (100 BYTE) NOT NULL ,
    DINHEIRO        NUMBER (7) NOT NULL ,
    DATAREGISTO     DATE NOT NULL ,
    DATAULTIMOLOGIN DATE
  )
  PCTFREE 10 PCTUSED 40 TABLESPACE SYSTEM LOGGING STORAGE
  (
    INITIAL 65536 NEXT 1048576 PCTINCREASE 0 MINEXTENTS 1 MAXEXTENTS 2147483645 FREELISTS 1 FREELIST GROUPS 1 BUFFER_POOL DEFAULT
  ) ;
CREATE UNIQUE INDEX SD.UTILIZADORES_PK ON SD.UTILIZADORES
  (
    USERID ASC
  )
  TABLESPACE SYSTEM PCTFREE 10 STORAGE
  (
    INITIAL 65536 NEXT 1048576 PCTINCREASE 0 MINEXTENTS 1 MAXEXTENTS 2147483645 FREELISTS 1 FREELIST GROUPS 1 BUFFER_POOL DEFAULT
  )
  LOGGING ;
  ALTER TABLE SD.UTILIZADORES ADD CONSTRAINT UTILIZADORES_PK PRIMARY KEY
  (
    USERID
  )
  USING INDEX SD.UTILIZADORES_PK ;

ALTER TABLE SD.IDEIASFICHEIROS ADD CONSTRAINT IDEIASFICHEIROS_IDEIAS_FK FOREIGN KEY ( IID ) REFERENCES SD.IDEIAS ( IID ) NOT DEFERRABLE ;

ALTER TABLE SD.SHARES ADD CONSTRAINT SHARES_IDEIAS_FK FOREIGN KEY ( IID ) REFERENCES SD.IDEIAS ( IID ) NOT DEFERRABLE ;

ALTER TABLE SD.SHARES ADD CONSTRAINT SHARES_UTILIZADORES_FK FOREIGN KEY ( USERID ) REFERENCES SD.UTILIZADORES ( USERID ) NOT DEFERRABLE ;

ALTER TABLE SD.TOPICOSIDEIAS ADD CONSTRAINT TOPICOSIDEIAS_IDEIAS_FK FOREIGN KEY ( IID ) REFERENCES SD.IDEIAS ( IID ) NOT DEFERRABLE ;

ALTER TABLE SD.TOPICOSIDEIAS ADD CONSTRAINT TOPICOSIDEIAS_TOPICOS_FK FOREIGN KEY ( TID ) REFERENCES SD.TOPICOS ( TID ) NOT DEFERRABLE ;

ALTER TABLE SD.TOPICOS ADD CONSTRAINT TOPICOS_TOPICOS_FK FOREIGN KEY ( USERID ) REFERENCES SD.UTILIZADORES ( USERID ) NOT DEFERRABLE ;

ALTER TABLE SD.TRANSACOES ADD CONSTRAINT TRANSACOES_UTILIZADORES_FK FOREIGN KEY ( COMPRADOR ) REFERENCES SD.UTILIZADORES ( USERID ) NOT DEFERRABLE ;

ALTER TABLE SD.TRANSACOES ADD CONSTRAINT TRANSACOES_UTILIZADORES_FKV2 FOREIGN KEY ( VENDEDOR ) REFERENCES SD.UTILIZADORES ( USERID ) NOT DEFERRABLE ;

ALTER TABLE SD.IDEIAS ADD CONSTRAINT USERID FOREIGN KEY ( USERID ) REFERENCES SD.UTILIZADORES ( USERID ) NOT DEFERRABLE ;


-- Oracle SQL Developer Data Modeler Summary Report: 
-- 
-- CREATE TABLE                             7
-- CREATE INDEX                             7
-- ALTER TABLE                             16
-- CREATE VIEW                              0
-- CREATE PACKAGE                           0
-- CREATE PACKAGE BODY                      0
-- CREATE PROCEDURE                         0
-- CREATE FUNCTION                          0
-- CREATE TRIGGER                           0
-- ALTER TRIGGER                            0
-- CREATE COLLECTION TYPE                   0
-- CREATE STRUCTURED TYPE                   0
-- CREATE STRUCTURED TYPE BODY              0
-- CREATE CLUSTER                           0
-- CREATE CONTEXT                           0
-- CREATE DATABASE                          0
-- CREATE DIMENSION                         0
-- CREATE DIRECTORY                         0
-- CREATE DISK GROUP                        0
-- CREATE ROLE                              0
-- CREATE ROLLBACK SEGMENT                  0
-- CREATE SEQUENCE                          0
-- CREATE MATERIALIZED VIEW                 0
-- CREATE SYNONYM                           0
-- CREATE TABLESPACE                        0
-- CREATE USER                              1
-- 
-- DROP TABLESPACE                          0
-- DROP DATABASE                            0
-- 
-- ERRORS                                   0
-- WARNINGS                                 0
